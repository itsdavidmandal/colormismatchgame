<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Random Color Mismatch (Guaranteed)</title>
    <style>
        body {
            font-family: sans-serif;
            text-align: center;
            margin: 50px;
        }
        #color-button {
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            background-color: #ddd;
            cursor: pointer;
        }
        #color-display {
            margin-top: 20px;
            font-size: 24px;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <h1>Random Color Mismatch (Guaranteed)</h1>
    <button id="color-button">Get Random Color</button>
    <p id="color-display"></p>

    <script>
        const colorButton = document.getElementById('color-button');
        const colorDisplay = document.getElementById('color-display');

        const colors = [
            'red', 'orange', 'yellow', 'green', 'blue', 'indigo', 'violet',
            'crimson', 'fuchsia', 'magenta', 'teal', 'turquoise', 'aqua', 'navy',
            'brown', 'purple', 'gray', 'silver', 'gold', 'black', 'white'
        ];

        function getRandomColor() {
            const randomIndex = Math.floor(Math.random() * colors.length);
            const randomColor = colors[randomIndex];
            return randomColor;
        }

        function setRandomColor() {
            let randomColor = getRandomColor();
            let mismatchedColor;

            // Loop until a contrasting color is found
            while (mismatchedColor === undefined || mismatchedColor === randomColor) {
                mismatchedColor = getRandomColor();

                // Ensure sufficient contrast for accessibility
                const contrastRatio = calculateContrastRatio(mismatchedColor, randomColor);
                if (contrastRatio < 4.5) { // WCAG AA requires 4.5:1 for text
                    mismatchedColor = undefined; // Try again if contrast is low
                }
            }

            colorDisplay.textContent = randomColor;
            colorDisplay.style.color = mismatchedColor;
        }

        // Function to calculate contrast ratio between two colors
        function calculateContrastRatio(color1, color2) {
            const rgb1 = hexToRgb(color1);
            const rgb2 = hexToRgb(color2);
            const l1 = (Math.max(...rgb1) + Math.min(...rgb1)) / 255;
            const l2 = (Math.max(...rgb2) + Math.min(...rgb2)) / 255;
            const contrastRatio = (l1 + 0.05) / (l2 + 0.05);
            return contrastRatio;
        }

        // Function to convert hex color to RGB array
        function hexToRgb(hex) {
            const result = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex);
            return result ? [
                parseInt(result[1], 16),
                parseInt(result[2], 16),
                parseInt(result[3], 16)
            ] : null;
        }

        colorButton.addEventListener('click', setRandomColor);
    </script>
</body>
</html>
